// Feito por Gabriel Gama | Z
// Versão 1.2.0
const $URL="https://yttwo.netlify.app/y/",yt2css=document.createElement("link");yt2css.href=$URL+"yttwo.css",yt2css.rel="stylesheet",yt2css.id="yt2css",document.head.appendChild(yt2css);const interactjs=document.createElement("script");function Yttwo(e){function t(e){var t=e.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/);return!(!t||11!=t[7].length)&&t[7]}function n(){function e(e){return document.getElementById(e).offsetWidth}let t=e("secondary")+(e("primary")+24),n=document.body.clientWidth-t,i=e("secondary")+n/2;i-=24;const r=document.getElementById("yttwoframe");r.style.width=`${i}px`,r.style.height=i/100*56.25+"px";document.getElementById("yttwo").style.width=`${i}px`;document.getElementById("yt2search").style.maxWidth=e("secondary-inner")-15+"px",document.getElementById("yt2menu").style.width=e("secondary-inner")-90+"px"}const i=document.createElement("div");i.id="yttwo",i.innerHTML=`\n            <div class="yt2-iframe" id="yt2iframe"><div class="yt2-iframe__topbar">yttwo</div><iframe id="yttwoframe" src="" title="Yt2 Player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe></div>\n            <div class="yt2-bottom">\n                <div class="yt2-search" id="yt2search">\n                    <input type="text" class="ytd-searchbox" placeholder="https://www.youtube.com/watch?v=${e}" id="yttwoSearch">\n                    <button type="submit" id="yttwoBtn">\n                        <i class="yt2i-search"></i>\n                    </button>\n                </div>\n                <div class="yt2-settings" id="yt2settings">\n                    <button id="yttwoSettings">\n                        <i class="yt2i-settings"></i>\n                    </button>\n                    <div id="yt2menu" style="display: none">\n                        <p> <i class="yt2i-minify"></i>Minimizar</p>\n                        <p> <i class="yt2i-miniplayer"></i>Miniplayer (beta)</p>\n                        <p> <i class="yt2i-reload"></i>Recarregar</p>\n                        <p> <i class="yt2i-resize"></i>Reajustar vídeo</p>\n                    </div>\n                </div>\n            </div>\n            `,async function(){try{return document.getElementById("secondary").insertBefore(i,document.getElementById("secondary").children[0]),!0}catch(e){return!1}}().then((i=>{if(1==i){function r(e){e.preventDefault();const n=document.getElementById("yttwoSearch"),i=t(n.value);document.getElementById("yttwoframe").src="https://www.youtube.com/embed/"+i,n.setAttribute("placeholder",`https://www.youtube.com/watch?v=${t(n.value)}`)}document.getElementById("yttwoframe").src=`https://www.youtube.com/embed/${e}`,document.getElementById("yttwoBtn").addEventListener("click",r),document.getElementById("yttwoSearch").addEventListener("focus",(e=>{document.getElementById("yttwoSearch").addEventListener("keypress",(t=>{"Enter"==t.key&&r(e)}))})),document.getElementById("yttwoSettings").addEventListener("click",(()=>{"none"===document.getElementById("yt2menu").style.display?(document.getElementById("yt2menu").style.display="block",document.getElementById("yt2search").style.opacity="0.5"):(document.getElementById("yt2menu").style.display="none",document.getElementById("yt2search").style.opacity="1")})),n(),document.body.onresize=n,function(){const e=()=>{n(),setTimeout((()=>{n(),setTimeout((()=>{}),1500)}),500)};document.querySelector(".ytp-fullscreen-button").addEventListener("click",(()=>{e()})),document.addEventListener("keydown",(t=>{"f"==t.key&&e()}))}(),[...document.querySelectorAll("#yt2menu p")].map((t=>{t.addEventListener("click",(i=>{switch(t.children[0].className.replace(/yt2i-/g,"")){case"minify":document.getElementById("yttwoframe").classList.add("minify"),t.querySelector("i").classList.replace("yt2i-minify","yt2i-maxify"),t.innerHTML=t.innerHTML.replace(t.textContent.trim(),"Maximizar");break;case"maxify":document.getElementById("yttwoframe").classList.remove("minify"),t.querySelector("i").classList.replace("yt2i-maxify","yt2i-minify"),t.innerHTML=t.innerHTML.replace(t.textContent.trim(),"Minimizar");break;case"resize":n();break;case"miniplayer":const i=document.getElementById("yttwoframe").offsetWidth,r=document.getElementById("yttwoframe").offsetHeight;t.querySelector("i").classList.replace("yt2i-miniplayer","yt2i-defaultplayer"),document.getElementById("yt2iframe").classList.add("miniplayer"),document.getElementById("yttwoframe").classList.add("miniplayer-iframe"),document.getElementById("yt2iframe").style.height=r/1.5+"px",document.getElementById("yt2iframe").style.width=i/1.5+"px",console.log(r/1.5+12,i/1.5);const a=document.createElement("div");a.className="yt2-view-miniplayer",document.body.insertBefore(a,document.querySelector("ytd-app")),function(e){function t(){function e(e){var t=e.target,n=(parseFloat(t.getAttribute("data-x"))||0)+e.dx,i=(parseFloat(t.getAttribute("data-y"))||0)+e.dy;t.style.transform="translate("+n+"px, "+i+"px)",t.setAttribute("data-x",n),t.setAttribute("data-y",i)}interact(".miniplayer").draggable({modifiers:[interact.modifiers.restrictRect({restriction:document.querySelector(".yt2-view-miniplayer")})],listeners:{start:e=>{document.body.style.overflow="hidden"},move:e,end:()=>{document.body.style.removeProperty("overflow")}}}).resizable({manualStart:!1,edges:{right:!0,bottom:!0,left:!0},listeners:{move(e){var t=e.target,n=parseFloat(t.getAttribute("data-x"))||0,i=parseFloat(t.getAttribute("data-y"))||0;t.style.width=e.rect.width+"px",t.style.height=e.rect.height+"px",n+=e.deltaRect.left,i+=e.deltaRect.top,t.style.transform="translate("+n+"px,"+i+"px)",t.setAttribute("data-x",n),t.setAttribute("data-y",i)}},modifiers:[interact.modifiers.restrictEdges({outer:"parent"}),interact.modifiers.restrictSize({min:{width:i/1.8,height:r/1.8},max:{width:2*i,height:2*r}}),interact.modifiers.aspectRatio({ratio:1.78})],inertia:!0}),window.dragMoveListener=e}t(),window.onresize=t()}(document.getElementById("yttwoframe"));break;case"defaultplayer":t.querySelector("i").classList.replace("yt2i-defaultplayer","yt2i-miniplayer");const o=document.getElementById("yt2iframe");o.classList.remove("miniplayer"),o.style.removeProperty("width"),o.style.removeProperty("height"),o.style.removeProperty("transform"),document.querySelector("#yttwoframe").classList.remove("miniplayer-iframe"),document.body.removeChild(document.querySelector(".yt2-view-miniplayer")),n();break;case"reload":const s=document.querySelector("#yttwo");s.parentElement.removeChild(s),setTimeout((()=>{Yttwo(e)}),800)}}))}))}else alert("Erro no yttwo! Atualize a página e tente novamente!")}))}interactjs.src="https://unpkg.com/interactjs/dist/interact.min.js",document.body.insertBefore(interactjs,document.getElementById("yt2script"));